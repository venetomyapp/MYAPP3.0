<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=5.0"/>
  <title>Esperto Normative - Sindacato Carabinieri</title>

  <!-- Favicon personalizzato -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='30' fill='%23e94560'/%3E%3Ctext x='32' y='40' text-anchor='middle' fill='white' font-size='24' font-weight='bold'%3E📋%3C/text%3E%3C/svg%3E">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    if (typeof tailwind !== 'undefined') {
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              aurora: '#e94560',
              specialBlue: '#1e3a8a'
            }
          }
        }
      };
    }
  </script>

  <style>
    :root{
      --gradient: linear-gradient(135deg,#1e3a8a 0%, #3b82f6 25%, #e94560 75%, #f59e0b 100%);
      --header-h: 70px;
    }
    body{
      min-height:100vh;background:var(--gradient);background-size:400% 400%;
      animation:bg 25s ease infinite;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
    }
    @keyframes bg{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}
    .header{position:sticky;top:0;height:var(--header-h);
      background:rgba(30,58,138,.15);backdrop-filter:blur(16px);border-bottom:2px solid rgba(255,255,255,.2)}
    .chat{background:#fff;border-radius:20px;box-shadow:0 12px 35px rgba(0,0,0,.2);
      max-width:1000px;margin:1rem auto;height:calc(100vh - var(--header-h) - 2rem);
      display:flex;flex-direction:column;overflow:hidden;border:1px solid rgba(255,255,255,.3)}
    .expert-header{
      background:linear-gradient(135deg,#1e3a8a,#3b82f6);color:#fff;padding:1.5rem;text-align:center;
      border-bottom:3px solid #e94560;
    }
    .msgs{flex:1;overflow:auto;padding:1.5rem;background:#fafafa}
    .row{display:flex;gap:1rem;margin-bottom:1.5rem;animation:slideIn .3s ease}
    @keyframes slideIn{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:none}}
    .av{width:42px;height:42px;border-radius:50%;display:grid;place-items:center;
      color:#fff;flex:0 0 42px;font-size:1.2rem;box-shadow:0 4px 8px rgba(0,0,0,.2)}
    .av-bot{background:linear-gradient(135deg,#1e3a8a,#3b82f6)}
    .av-user{background:linear-gradient(135deg,#e94560,#f59e0b)}
    .bub{max-width:75%;padding:1.2rem;border-radius:16px;box-shadow:0 2px 8px rgba(0,0,0,.1)}
    .b-bot{background:#fff;border:1px solid #e5e7eb}
    .b-user{background:linear-gradient(135deg,#e94560,#f59e0b);color:#fff;margin-left:auto}
    .time{font-size:.7rem;opacity:.7;margin-top:.5rem;font-weight:500}
    .cta{display:inline-block;background:#1e3a8a;color:#fff!important;padding:1rem 1.5rem;
      border-radius:12px;font-weight:700;margin-top:1rem;text-decoration:none;
      transition:all .2s;box-shadow:0 4px 12px rgba(30,58,138,.3)}
    .cta:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(30,58,138,.4)}
    .expert-badge{
      background:#f59e0b;color:#fff;padding:.3rem .8rem;border-radius:20px;
      font-size:.8rem;font-weight:bold;margin-left:.5rem;
    }
  </style>
</head>
<body>
  <!-- Header Specializzato -->
  <header class="header">
    <div class="max-w-6xl mx-auto px-6 h-full flex items-center justify-between">
      <div class="flex items-center gap-4">
        <button onclick="history.back()" class="rounded-xl px-3 py-2 border border-white/40 text-white hover:bg-white/20 transition-all" type="button">← Indietro</button>
        <h1 class="text-white font-bold text-lg">📋 Esperto Normative</h1>
        <span class="expert-badge">SPECIALIZZATO</span>
      </div>
      <div class="flex items-center gap-3">
        <button id="clear" class="px-4 py-2 rounded-lg bg-white/15 text-white text-sm border border-white/30 hover:bg-white/25 transition-all" type="button">🗑️ Reset</button>
        <button id="help" class="px-4 py-2 rounded-lg bg-white/15 text-white text-sm border border-white/30 hover:bg-white/25 transition-all" type="button">💡 Info</button>
      </div>
    </div>
  </header>

  <main class="py-4">
    <div class="chat">
      <!-- Header Esperto -->
      <div class="expert-header">
        <div class="flex items-center justify-center gap-4">
          <div class="w-14 h-14 bg-white/20 rounded-full grid place-items-center text-3xl">📋</div>
          <div class="text-left">
            <div class="font-bold text-2xl">Esperto Normative</div>
            <div class="text-sm opacity-90">Specialista in Regolamenti & Decreti Sindacali</div>
            <div class="text-xs opacity-75 mt-1">📚 Accesso diretto ai documenti ufficiali</div>
          </div>
        </div>
      </div>

      <div id="msgs" class="msgs" role="log" aria-live="polite">
        <div class="row">
          <div class="av av-bot">📋</div>
          <div class="bub b-bot">
            <strong>Benvenuto nell'Assistente Normative Specializzato!</strong><br>
            Sono il tuo esperto dedicato per regolamenti, decreti e normative del Sindacato Carabinieri.<br>
            <em>Chiedi informazioni su normative specifiche, decreti o regolamenti.</em>
            <div class="time">Ora</div>
          </div>
        </div>
      </div>

      <!-- Indicatore typing -->
      <div id="typing" class="px-6 py-3 hidden">
        <div class="row">
          <div class="av av-bot">📋</div>
          <div class="bub b-bot">
            <div class="flex gap-1">
              <div class="w-2 h-2 bg-blue-500 rounded-full animate-bounce"></div>
              <div class="w-2 h-2 bg-blue-500 rounded-full animate-bounce" style="animation-delay:0.1s"></div>
              <div class="w-2 h-2 bg-blue-500 rounded-full animate-bounce" style="animation-delay:0.2s"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Input specializzato -->
      <div class="p-4 border-t bg-gradient-to-r from-blue-50 to-orange-50">
        <div class="max-w-4xl mx-auto flex gap-3">
          <textarea id="inp" rows="1" maxlength="500" 
            class="flex-1 rounded-xl border-2 border-blue-200 px-4 py-3 outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
            placeholder="🔍 Es: Normativa sui veterani, decreto ferie, regolamento disciplinare..."></textarea>
          <button id="send" 
            class="rounded-xl bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3 font-bold disabled:opacity-50 hover:from-blue-700 hover:to-blue-800 transition-all" 
            disabled>📤 Invia</button>
        </div>
      </div>

      <!-- Footer info -->
      <div class="px-4 py-3 text-xs text-gray-600 border-t bg-gray-50 flex items-center justify-between">
        <div id="conn" class="flex items-center gap-2">
          <div class="w-2 h-2 bg-green-500 rounded-full"></div>
          Connesso - Accesso Database Normative
        </div>
        <div class="flex gap-4">
          <span>Docs: <span id="docs-found">0</span></span>
          <span>Token: <span id="tok">0</span></span>
          <span>Caratteri: <span id="chars">0</span>/500</span>
        </div>
      </div>
    </div>
  </main>

  <script type="module">
    // ... (stesso JavaScript di Virgilio ma con personalizzazioni)
    // Cambia solo:
    // - Avatar: 📋 invece di 🤖
    // - Nome: "Esperto Normative" 
    // - Messaggi più focalizzati su normative
    // - Contatore documenti trovati
    
    console.log('🚀 Esperto Normative - Clone Specializzato Attivo');
  </script>
</body>
</html>
